## Запуск в minikube
### Подготовка инфры для запуска сервиса в minikube
01. ```minikube start``` Стартуем minikube 
02. ```minikube dashboard``` Запускаем дашборд кубера 
03. ```minikube addons enable ingress``` Включаем ingress аддон от NGINX 
04. ```minikube tunnel``` Стартуем тунель, чтобы подключаться к нашему сервису локально
05. ```k get pods -n ingress-nginx``` Проверяем что ingress NGINX запустился
06. ```alias k="minikube kubectl --"``` Для удобства создаем алиас для работы с kubectl
07. ```helm repo add prometheus-community https://prometheus-community.github.io/helm-charts```  Скачиваем репозиторий с prometheus
08. ```helm repo update``` Обновляем репозиторий
09. ```helm install stack prometheus-community/kube-prometheus-stack -f ./helm/prometheus.yaml```  Устанавливаем весь стек - прометей + оператор + графана
10. ```k port-forward service/prometheus-operated 9090``` Подписываемся на prometheus на порт 9090
11. http://arch.homework:9090/graph - открываем в браузере Prometheus
12. ```k port-forward service/stack-grafana  9000:80``` Подписываемся на grafana на порт 9090
13. http://arch.homework:9000 - открываем в браузере Grafana (Логпас admin / prom-operator)
14. ```k apply -f helm/kafka``` Для начала стоит добавить кафку в наш кластер
15. ```k port-forward service/kafka-ui 8080``` чтобы получить доступ откроем порт для kafka-ui
16. http://arch.homework:8080 - открываем в браузере Kafka UI
17. ```helm upgrade --install lotus ./helm/lotus --values helm/lotus/values.yaml``` Команда для запуска сервиса со сбором метрик, для запуска необходимо сначала поднять stack prometheus
18. Дальше демо